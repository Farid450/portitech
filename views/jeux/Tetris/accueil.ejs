<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TETRIS</title>
    <script src="../../../javascripts/Tetris/phaser.min.js"></script>
</head>

<body style="margin:0px auto;">
<header><% include ../../partials/header %></header>
HELLO WORLD

<div align="center">
    <script>

        var game = new Phaser.Game(160, 320, Phaser.AUTO, 'Tetris', { preload: preload, create: create, update: update });

        console.log(grid);
        function preload() {
            game.load.spritesheet('tetrominos', '../../../images/tetris/Tetrominos.png',32,16);
            game.load.spritesheet('bg', '../../../images/tetris/Grid.png');
            console.log('preload');
        }
        function create() {
            BackgroundSprite = game.add.tileSprite(0,0,game.width,game.height,'bg')
            player = game.add.sprite(20, 0, 'tetrominos');

            game.physics.arcade.enable(player);

            //  Player physics properties. Give the little guy a slight bounce.
            player.body.bounce.y = 0;
            player.body.gravity.y = 50;
            player.body.collideWorldBounds = true;

            //  Our two animations, walking left and right.
            player.animations.add('left', [0, 1, 2, 3], 10, true);
            player.animations.add('right', [5, 6, 7, 8], 10, true);

            console.log('create');
        }

        function update(){
           var cpt = 0;
           cpt++;
           if (counter = 5){
               player.body.gravity.y = 0;
           }



            cursors = game.input.keyboard.createCursorKeys();

            //  Reset the players velocity (movement)
            player.body.velocity.x = 0;

            if (cursors.left.isDown)
            {
                //  Move to the left
                player.body.velocity.x = -16;
            }
            if (cursors.right.isDown)
            {
                //  Move to the right
                player.body.velocity.x = 16;

            }
            if (cursors.up.isDown)
            {

                player.body.allowRotation = true;
                player.body.angularVelocity = 90;

            }
            else if( cursors.up.isUp){
                player.body.allowRotation = false;
                player.body.angularVelocity = 0;

            }
            if(cursors.down.isDown){
                player.body.gravity.y = 1500;
            }
            console.log('update');

            if( player.body.touching.down){
            }
        }

    </script>
</div>

</body>
</html>